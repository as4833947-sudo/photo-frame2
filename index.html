<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø¯Ù…Ø¬ ØµÙˆØ±ØªÙƒ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±</title>

<style>
body{
    font-family: Tahoma;
    direction: rtl;
    text-align: center;
    background: #eee;
    padding: 20px;
}

/* Ø­Ø¬Ù… Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
#frame-box{
    width: 450px;
    margin: auto;
    position: relative;
}

#frame{
    width: 100%;
    display: block;
}

/* ğŸ“ Ù…ÙƒØ§Ù† ÙˆÙ‚ÙŠØ§Ø³ Ø¥Ø¯Ø±Ø§Ø¬ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø± */
#user-img{
    position:absolute;
    left: 245px; /* Ø§Ù„Ø¶Ø¨Ø· Ø§Ù„Ø£ÙÙ‚ÙŠ */
    top: 160px;  /* Ø§Ù„Ø¶Ø¨Ø· Ø§Ù„Ø±Ø£Ø³ÙŠ */
    width: 155px;
    height: 190px;
    object-fit: cover;
    border-radius: 3px;
    display:none;
}

button,input{
    padding:10px 15px;
    margin-top:10px;
    border:0;
    background:#007bff;
    color:#fff;
    border-radius:5px;
    cursor:pointer;
}

#download{background:#28a745}
</style>
</head>

<body>

<h2>ğŸ“¸ Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ù„ØªØ¸Ù‡Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø±</h2>

<input type="file" id="upload" accept="image/*"><br>
<button id="download" style="display:none">â¬‡ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©</button>
<button onclick="navigator.clipboard.writeText(location.href)">ğŸ”— Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</button>

<div id="frame-box">
    <img id="user-img">
    <img id="frame" src="ÙƒØ¨ÙŠØ±.jpg">   <!-- Ø¶Ø¹ Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ…Ø§ Ø±ÙØ¹ØªÙ‡ -->
</div>

<canvas id="canvas" width="450" height="720" style="display:none"></canvas>

<script>

upload.onchange = e =>{
    let file = e.target.files[0];
    if(!file) return;
    user-img.src = URL.createObjectURL(file);
    user-img.style.display="block";
    download.style.display="inline-block";
}

download.onclick=()=>{
    let c=document.getElementById("canvas"),
        ctx=c.getContext("2d"),
        frame=document.getElementById("frame"),
        user=document.getElementById("user-img");

    ctx.drawImage(frame,0,0,450,720);
    ctx.drawImage(user,245,160,155,190);

    let a=document.createElement("a");
    a.download="final.png";
    a.href=c.toDataURL();
    a.click();
}

</script>

</body>
</html>
